namespace = wotd_flora_and_fauna

# Event 1: Shagged by a Kakapo
wotd_flora_and_fauna.1 = {
	type = exploration_event
	title = wotd_flora_and_fauna.1.title
	desc = wotd_flora_and_fauna.1.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/kakapo.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_kakapo } }
		location = {
			area = area:south_island_area
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = target_root_country }
	}

	option = {
		name = wotd_flora_and_fauna.1.a
		random = {
			chance = 50 
			custom_tooltip = { 
				text = wotd_flora_and_fauna.1.a.tt

				change_exploration_progress = {
					value = exploration_time
					multiply = -0.02
				}

				increase_peril_effect = {
					CHANGE = wotd_peril_small_value
				}
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.1.b
		trigger = {
			location = {
				any_neighbor_location = {
					has_owner = yes 
				}
			}
		}

		location = {
			random_neighbor_location = {
				limit = {
					has_owner = yes
				}
				save_scope_as = target_country
				owner = {
					add_opinion = {
						target = scope:target_root_country
						modifier = wotd_gifted_kakapo
					}
				}
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.1.c

		leader = {
			add_character_modifier = { modifier = wotd_pet_parrot_kakapo mode = add_and_extend }
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_kakapo }
	}
}

# Stellar Sea Cow

# Event 2: Stellar Sea Cow
wotd_flora_and_fauna.2 = {
	type = exploration_event
	title = wotd_flora_and_fauna.2.title
	desc = wotd_flora_and_fauna.2.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/stellar_sea_cow.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		
		owner = { NOT = { has_variable = wotd_discovered_stellar_sea_cow  }}
		location = {
			area = area:labrador_sea_area
			area = area:western_greenland_sea_zones_area
			area = area:hudson_bay_sea_zones_area
			area = area:alaska_sea_zones_area
		}
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = target_root_country }
		scope:target_root_country = { random_exploration_from_country = { owner = { random_neighbor_country = { save_scope_as = buyer } } } }
	}

	option = { # Continue exploring
		name = wotd_flora_and_fauna.2.a
		change_exploration_progress = {
			value = exploration_time
			multiply = 0.05
		}
	}
	option = { # Stock up on meat
		name = wotd_flora_and_fauna.2.b

		change_exploration_progress = {
			value = exploration_time
			multiply = -0.25
		}

		decrease_peril_effect = {
			CHANGE = wotd_peril_large_value
		}

		owner = {
			add_country_modifier = { modifier = wotd_sea_whale_meat_modifier years = 2 }
		}
	}
	option = { # Sell the skeleton to a foreign court
		name = wotd_flora_and_fauna.2.c
		scope:buyer = {
			add_gold = -10
			add_country_modifier = { modifier = wotd_mermaid_skeleton_modifier years = 2 }
		}
		owner = { add_gold = 10 }
	}
	after = { 
		owner = { set_variable = wotd_discovered_stellar_sea_cow }
	}
}

# Event 3: Man-Sized Salamanders
wotd_flora_and_fauna.3 = {
	type = exploration_event
	title = wotd_flora_and_fauna.3.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { 
					owner.capital ?= { region = region:japan_region }
				}
				desc = wotd_flora_and_fauna.3.desc
			}
			desc = wotd_flora_and_fauna.3.desc.european
		}
	}
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/japanese_giant_salamander_small.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_giant_salamander } }
		location = {
			region = region:japan_region
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
		scope:launch_location = { save_scope_as = launch_location_test }
	}

	option = {
		name = wotd_flora_and_fauna.3.a
		# owner = {
		# 	add_country_modifier = { modifier = wotd_salamander_medicine_modifier years = 3 }
		# }
		change_exploration_progress = {
			value = exploration_time
			multiply = -0.03
		}
	}
	option = {
		name = wotd_flora_and_fauna.3.b
		# owner = {
		# 	add_country_modifier = { modifier = wotd_salamander_festival_modifier years = 5 }
		# }
	}
	option = {
		name = wotd_flora_and_fauna.3.c
		# owner = {
		# 	add_country_modifier = { modifier = wotd_royal_salamander_modifier years = 10 }
		# }
		#owner = { add_gold = -5 }
	}
	after = { 
		owner = { set_variable = wotd_discovered_giant_salamander }
	}
}

# wotd_flora_and_fauna.4.title: "A Rising Storm"
# wotd_flora_and_fauna.4.desc: "Dark clouds gather across the horizon, their shadows swallowing the sea ahead. The wind howls, and waves crash violently against the hull as the crew scrambles to secure the rigging. Our charts show no nearby ports, and the nearest known coast lies far beyond sight.\n\nWith thunder rolling closer, the captain must decide our course before the storm breaks. Somewhere beyond the rain and mist, new lands may yet await discovery."
# wotd_flora_and_fauna.4.a: "Sail south." #Does Nothing but delay progress, fires same next event
# wotd_flora_and_fauna.4.b: "Sail north." #Does Nothing but delay progress, fires same next event
# wotd_flora_and_fauna.4.c: "Sail west." #Does Nothing but delay progress, fires same next event
# wotd_flora_and_fauna.4.d: "Sail east." #Does Nothing but delay progress, fires same next event

# Event 4: A Rising Storm # Dodo Chain
wotd_flora_and_fauna.4 = {
	type = exploration_event
	title = wotd_flora_and_fauna.4.title
	desc = wotd_flora_and_fauna.4.desc
	image = "gfx/interface/illustrations/location/sea/ocean_bigger.dds"
	trigger = {
		exploration_progress > 0.1
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_mauritius_storm_encountered } }

		location = {
			area = area:madagascar_sea_area
		}
		area = { is_area_sea = yes }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.4.a
		change_exploration_progress = {
			value = exploration_time
			multiply = -0.10
		}
		increase_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
		hidden_effect = {
			trigger_event_silently = {
				id = wotd_flora_and_fauna.5
				days = 10
			}
		}
		custom_tooltip = wotd_custom_followup_event
	}
	option = {
		name = wotd_flora_and_fauna.4.b
		change_exploration_progress = {
			value = exploration_time
			multiply = -0.10
		}
		increase_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
		hidden_effect = {
			trigger_event_silently = {
				id = wotd_flora_and_fauna.5
				days = 10
			}
		}
		custom_tooltip = wotd_custom_followup_event
	}
	option = {
		name = wotd_flora_and_fauna.4.c
		change_exploration_progress = {
			value = exploration_time
			multiply = -0.10
		}
		increase_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
		hidden_effect = {
			trigger_event_silently = {
				id = wotd_flora_and_fauna.5
				days = 10
			}
		}
		custom_tooltip = wotd_custom_followup_event
	}
	option = {
		name = wotd_flora_and_fauna.4.d
		change_exploration_progress = {
			value = exploration_time
			multiply = -0.10
		}
		increase_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
		hidden_effect = {
			trigger_event_silently = {
				id = wotd_flora_and_fauna.5
				days = 10
			}
		}
		custom_tooltip = wotd_custom_followup_event
	}
	
	after = { 
		owner = { set_variable = wotd_mauritius_storm_encountered }
	}
}

# Event 5: An Odd Flightless Bird # Dodo Chain
wotd_flora_and_fauna.5 = {
	type = exploration_event
	title = wotd_flora_and_fauna.5.title
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { 
					location = {
						has_owner = no
					}
				}
				desc = wotd_flora_and_fauna.5.desc
			}
			desc = wotd_flora_and_fauna.5.desc.colonized
		}
	}
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/dodo.dds"

	trigger = {
		leader ?= {
			is_alive = yes
		}
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = discovery_country }
	}

	option = { # End thus it must taste great!
		name = wotd_flora_and_fauna.5.a
		custom_tooltip = wotd_flora_and_fauna.5.a.tt

		trigger_event_silently = {
			id = wotd_flora_and_fauna.6
			days = 5
		}
		custom_tooltip = wotd_custom_followup_event
	}
	option = { # Kill them! How dare they befoul our helmets!
		name = wotd_flora_and_fauna.5.b

		custom_tooltip = wotd_flora_and_fauna.5.b.tt
		trigger_event_silently = {
			id = wotd_flora_and_fauna.7
			days = 5
		}
		custom_tooltip = wotd_custom_followup_event
	}
	option = { # Take some specimens back home
		name = wotd_flora_and_fauna.5.c
		trigger_event_silently = {
			id = wotd_flora_and_fauna.8
			years = 1
		}
		custom_tooltip = wotd_custom_followup_event
	}
	option = { # Leave the birds alone
		name = wotd_flora_and_fauna.5.d
		trigger_event_silently = {
			id = wotd_flora_and_fauna.10
			days = 5
		}
		custom_tooltip = wotd_custom_followup_event
	}
	after = {
		owner = { save_scope_as = discovery_country }
		every_country = {
			limit = {
				is_ai = no
				NOT = { has_global_variable = wotd_discovered_dodo }
			}
			trigger_event_silently = { 
				id = wotd_flora_and_fauna.11
				years = { 100 200}
				#days = 30
			}
		}
		set_global_variable = wotd_discovered_dodo
	}
}

# Event 6: Hunting for Dodos # Dodo Chain
wotd_flora_and_fauna.6 = {
	type = exploration_event
	title = wotd_flora_and_fauna.6.title
	desc = wotd_flora_and_fauna.6.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/dodo.dds"

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.6.a
		trigger_event_silently = {
			id = wotd_flora_and_fauna.9
			days = 3
		}
		custom_tooltip = wotd_custom_followup_event
	}
}

# Event 7: End of the Dodo # Dodo Chain
wotd_flora_and_fauna.7 = {
	type = exploration_event
	title = wotd_flora_and_fauna.7.title
	desc = wotd_flora_and_fauna.7.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/end_of_dodos.dds"

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.7.a
		owner = { add_gold = 10 }
		province_definition:mascarene_islands_province = {
			every_location_in_province_definition = {
				add_location_modifier = {
    				modifier = wotd_dodo_extinct_modifier
    				years = -1
				}
			}
		}
	}
}

# Event 8: Dodo and the Unicorn # Dodo Chain
wotd_flora_and_fauna.8 = {
	type = exploration_event
	title = wotd_flora_and_fauna.8.title
	desc = wotd_flora_and_fauna.8.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/dodo.dds"

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.8.a
		owner = {
			add_country_modifier = { modifier = wotd_exotic_menagerie_modifier years = 3 }
		}
	}
}

# Event 9: Horrible Taste # Dodo Chain
wotd_flora_and_fauna.9 = {
	type = exploration_event
	title = wotd_flora_and_fauna.9.title
	desc = wotd_flora_and_fauna.9.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/dodo.dds"

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.9.a
		# Useless bird, forget about it
		increase_peril_effect = {
			CHANGE = wotd_peril_small_value
		}
	}
	option = {
		name = wotd_flora_and_fauna.9.b
		increase_peril_effect = {
			CHANGE = wotd_peril_small_value
		}
		random = {
			chance = 50
			owner = {
				add_country_modifier = { modifier = wotd_exotic_menagerie_modifier years = 3 }
			}
		}
	}
}
# Event 10: A Quiet End # Dodo Chain
wotd_flora_and_fauna.10 = { 
	type = exploration_event
	title = wotd_flora_and_fauna.10.title
	desc = wotd_flora_and_fauna.10.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/dodo.dds"

	option = {
		name = wotd_flora_and_fauna.10.a
		# A quiet end for a quiet creature.
	}
}


# Event 11: The Way of the Dodo #Fires after 100-200 years to all players, if anyone discovered the dodo first  # Dodo Chain
wotd_flora_and_fauna.11 = {
	type = country_event
	title = wotd_flora_and_fauna.11.title
	desc = wotd_flora_and_fauna.11.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/end_of_dodos.dds"

	immediate = {
		province_definition:mascarene_islands_province = {
			save_scope_as = mauritius
		}
	}

	option = {
		name = wotd_flora_and_fauna.11.a
		province_definition:mascarene_islands_province = {
			every_province_in_province_definition = {
				add_province_modifier = {
    				modifier = wotd_dodo_extinct_modifier
    				years = -1
				}
			}
		}
	}
}

# Event 12: Swimming Jackasses
wotd_flora_and_fauna.12 = {
	type = exploration_event
	title = wotd_flora_and_fauna.12.title
	desc = wotd_flora_and_fauna.12.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/african_penguins.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_african_penguins } }
		location = {
			OR = {
				area = area:southern_africa_coast_area
				area = area:karoo_coast_area
			}
		}
		area = { is_area_sea = yes }
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = target_root_country }
	}

	option = {
		name = wotd_flora_and_fauna.12.a
		scope:target_root_country = { add_gold = -500 }
		area:goringhaikona_area = {
			every_province_definition_in_area = {
				scope:target_root_country = {
					add_colonial_claim = {
						province_definition = prev
						reason = wotd_flora_and_fauna.12.a.claim.tt
						category = same_religion
					}
				}
			}
			random_province_definition_in_area = {
				limit = {
					any_location_in_province_definition = { is_coastal = yes }
				}
				scope:target_root_country = {
					random_province = {
						save_scope_as = origin
					}
					create_colonial_charter = {
						source = scope:origin
						target = prev
					}
				}
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.12.b
		owner = {
			add_gold = 50
			add_country_modifier = { modifier = wotd_exotic_penguins_modifier years = 2 }
		}
		ai_chance = {
			base = 50
		}
	}

	option = {
		name = wotd_flora_and_fauna.12.c
		trigger = {
			owner = {
				any_cabinet_character = {
					is_artist = yes
				}
			}
		}
		owner = {
			ruler ?= {
				add_adm = 5
				add_dip = 10
			}
		}
		decrease_peril_effect = {
			CHANGE = wotd_peril_small_value
		}
	}
	after = { 
		owner = { set_variable = wotd_discovered_african_penguins }
	}
}

#Event 13: Cook Lost in the Jungle # Colony Only Event
wotd_flora_and_fauna.13 = {
	type = exploration_event
	title = wotd_flora_and_fauna.13.title
	desc = wotd_flora_and_fauna.13.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/orangutan.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_orangutan } }
		location = {
			region = region:indonesia_region
			any_nomad_countries_in_location = {
				count > 0
			}
		}
	}

	immediate = {
		leader = { save_scope_as = explorer }
		location = { save_scope_as = province }
	}

	option = {
		name = wotd_flora_and_fauna.13.a
		location = {
			random_nomad_countries_in_location = {
				save_scope_as = tribal_nation
			}
		}
		change_exploration_progress = {
			value = exploration_time
			multiply = 0.02
		}
		scope:tribal_nation = {	add_opinion = { target = owner modifier = angry_natives } }
	}

	option = {
		name = wotd_flora_and_fauna.13.b
		trigger = {
			owner = {
				culture = culture:low_franconian
			}
		}
		owner = {
			create_character = {
				first_name = name_james
				last_name = "Bontius"
				birth_location = location:breda
				estate = estate_type:burghers_estate
				adm = { 50 70 }
				artist_skill = 0.90
				culture = culture:low_franconian
				
				artist_skill = { 0.7 0.85 }
				artist = scientist
				save_scope_as = target_character
				create_in_limbo = yes
			}
		}
	}
	option = {
		name = wotd_flora_and_fauna.13.c
		random_list = {
			40 = {
				location = {
					random_nomad_countries_in_location = {
						save_scope_as = tribal_nation
					}
				}
				scope:tribal_nation = {	add_opinion = { target = owner modifier = angry_natives } }
			}
			50 = {
				change_exploration_progress = {
					value = exploration_progress
					multiply = 0.15
				}
				scope:explorer = {
					add_character_modifier = { modifier = injured years = 1 }
					add_character_modifier = { modifier = wotd_rescued_cook_modifier years = 5 }
				}
				decrease_peril_effect = {
					CHANGE = wotd_peril_large_value
				}
			}
			10 = {
				change_exploration_progress = {
					value = exploration_progress
					multiply = -0.35
				}
				random_list = {
					50 = {
						scope:explorer = {
							add_character_modifier = { modifier = gravely_injured years = 1}
						}
						increase_peril_effect = {
							CHANGE = wotd_peril_medium_value
						}
					}
					50 = {
						scope:explorer = {
							kill_character = {
								reason = wild_animal
								target = this
							}
						}
						increase_peril_effect = {
							CHANGE = wotd_peril_large_value
						}
					}
				}
			}
		}
	}
	after = { 
		owner = { set_variable = wotd_discovered_orangutan }
	}
}

# Event 14: Stinkbird Hoatzin
wotd_flora_and_fauna.14 = {
	type = exploration_event
	title = wotd_flora_and_fauna.14.title
	desc = wotd_flora_and_fauna.14.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/hoatzin.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_hoatzin } }
		location = {
			area = area:amazon_area
		}
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.14.a
		change_exploration_progress = {
			value = exploration_time
			multiply = -0.05
		}
		scope:explorer = {
			add_character_modifier = { modifier = wotd_disgusted_explorer_modifier years = 1 }
		}
		increase_peril_effect = {
			CHANGE = wotd_peril_small_value
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_hoatzin }
	}
}

# # wotd_flora_and_fauna.15 & 16 reserved for both China specific and Europe specific Giant Panda events.


# # Event 17: A Painter's Passing Fancy?
wotd_flora_and_fauna.17 = {
	type = exploration_event
	title = wotd_flora_and_fauna.17.title
	desc = wotd_flora_and_fauna.17.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/ocelot.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_ocelot } }
		location = {
			region = region:central_america_region
		}
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = {
			random_courtier = {
				limit = {
					is_artist = yes
					artist_type = painter
				}
				save_scope_as = painter_artist
			}
		}
		if = {
			limit = {
				NOT = {
					owner = {
						any_courtier = {
							is_artist = yes
							artist_type = painter
						}
					}
				}
			}
			owner = {
				create_character = {
					estate = estate_type:burghers_estate
					adm = { 30 50 }
					artist_skill = { 0.5 0.7 }
					artist = painter
					save_scope_as = painter_artist
				}
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.17.a
		scope:painter_artist ?= { 
			add_character_modifier = { modifier = wotd_ocelot_companion_modifier years = 5 } 
			add_artist_skill = 0.10
		}
		decrease_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
	}
	option = {
		name = wotd_flora_and_fauna.17.b
		owner = { add_gold = 15 }
	}

	after = { 
		owner = { set_variable = wotd_discovered_ocelot }
	}
}

# Event 18: Thieving Tamarins
wotd_flora_and_fauna.18 = {
	type = exploration_event
	title = wotd_flora_and_fauna.18.title
	desc = wotd_flora_and_fauna.18.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/golden_lion_tamarin.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_golden_lion_tamarin } }
		location = {
			region = region:brazil_region
		}
	}

	immediate = {
		leader = { save_scope_as = explorer }

		owner = {
			create_character = {
				age = {20 30}
				random_estate_type_trigger = {
					root = { estate_type_allowed_in_cabinet = {	estate_type = prev } }
				}
				trait_category = explorer
				create_in_limbo = yes
				save_scope_as = explorer_character
			}
			scope:explorer_character = {
				move_country = root
			}
		}
		location.area = {
			save_scope_as = area_of_exploration
		}
	}

	option = {
		name = wotd_flora_and_fauna.18.a
		# Time for a change in management. Who's with me? (Conquistador dies, new one is up for employ)

		leader = {
			kill_character = {
				reason = crew_mutiny
				target = this
				killer = scope:explorer_character
			}
		}

		owner = { 
			change_explorer = { area = scope:area_of_exploration character = scope:explorer_character }
		}
	}
	option = {
		name = wotd_flora_and_fauna.18.b
		# Let the monkeys be, they mean no harm.

		decrease_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_golden_lion_tamarin }
	}
}

# Event 19: An Etymological Mistake or Farce?
wotd_flora_and_fauna.19 = {
	type = exploration_event
	title = wotd_flora_and_fauna.19.title
	desc = wotd_flora_and_fauna.19.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/red_kangaroo.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_kangaroo } }
		location = {
			region = region:australia_region
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.19.a
		# "Challenge the crew to catch one for sport"
		random_list = {
			70 = {
				custom_tooltip = wotd_kangaroo_chase_fail_tt
				# "The kangaroos easily outpace our men"
				increase_peril_effect = {
					CHANGE = wotd_peril_small_value
				}
			}
			30 = {
				custom_tooltip = wotd_kangaroo_chase_success_tt
				# "One man manages to tackle a joey"
				decrease_peril_effect = {
					CHANGE = wotd_peril_small_value
				}
				owner = { add_prestige = 10 }
			}
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_kangaroo }
	}
}

# "Squawking Echoes" 
wotd_flora_and_fauna.20 = {
	type = exploration_event
	title = wotd_flora_and_fauna.20.title
	desc = wotd_flora_and_fauna.20.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/puerto_rican_parrot.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_puerto_rican_parrot } }
		location = {
			region = region:caribbean_region
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.20.a
		# This parrot shall join our ranks!
		scope:explorer = {
			add_character_modifier = { modifier = wotd_parrot_companion_modifier years = 18 }
		}
		decrease_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_puerto_rican_parrot }
	}
}

# Event 21: Tasmanian Wolf
wotd_flora_and_fauna.21 = {
	type = exploration_event
	title = wotd_flora_and_fauna.21.title
	desc = wotd_flora_and_fauna.21.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/thylacine_wolf.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_thylacine } }
		location = {
			province_definition = province_definition:tasmania_province
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.21.a
		owner = { add_gold = -100 }
		random_list = {
			80 = {
				custom_tooltip = wotd_thylacine_eradication_success_tt
				# "The wolves have been successfully driven from the area"
				location = {
					change_raw_material = goods:wool
				}
			}
			20 = {
				custom_tooltip = wotd_thylacine_eradication_failure_tt
				# "The wolves prove more cunning than expected"
				increase_peril_effect = {
					CHANGE = wotd_peril_small_value
				}
				show_as_tooltip = {
					scope:explorer = { add_character_modifier = { modifier = injured months = 3 mode = add_and_extend } }
				}
				hidden_effect = {
					random_list = {
						10 = {
							scope:explorer = { add_character_modifier = { modifier = injured months = 5 mode = add_and_extend } }
						}
						8 = {
							scope:explorer = { add_character_modifier = { modifier = severely_injured months = 9 mode = add_and_extend } }
						}
						5 = {
							scope:explorer = { add_character_modifier = { modifier = gravely_injured months = 13 mode = add_and_extend } }
						}
					}
				}
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.21.b
		# "Husbandry? Ha! Dig deep, and dig greedily." - Avoid the problem
		owner = { add_gold = -200 }
		location = {
			random_list = {
				5 = { 
					change_raw_material = goods:goods_gold
				}
				10 = { 
					change_raw_material = goods:copper 
					owner = { add_gold = 50 }
				}
				15 = { 
					change_raw_material = goods:iron 
					owner = { add_gold = 25 }
				}
				80 = { 
				}
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.21.c
		location = {
			change_raw_material = goods:livestock
		}

		ai_chance = {
			base = 100
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_thylacine }
	}
}

# Event 22: Moa and the Maori
wotd_flora_and_fauna.22 = {
	type = exploration_event
	title = wotd_flora_and_fauna.22.title
	desc = wotd_flora_and_fauna.22.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/moa_berries.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		current_date < 1450.1.1
		owner = { NOT = { has_variable = wotd_discovered_moa } }
		location = {
			region = region:new_zealand_region
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.22.a
		# We're just here to resupply. We'll embark at sunset.
		owner = {}
	}

	option = {
		name = wotd_flora_and_fauna.22.b
		#Giants birds you say?
		trigger_event_silently = {
			id = wotd_flora_and_fauna.23
			days = { 5 10 }
		}
		custom_tooltip = wotd_custom_followup_event
	}

	after = { 
		owner = { set_variable = wotd_discovered_moa }
	}
}

# Event 23: Moa and the Haast
wotd_flora_and_fauna.23 = {
	type = exploration_event
	title = wotd_flora_and_fauna.23.title
	desc = wotd_flora_and_fauna.23.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/moa_haast.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		current_date < 1450.1.1
		owner = { NOT = { has_variable = wotd_discovered_moa } }
		location = {
			region = region:new_zealand_region
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.23.a
		# "Observe the hunt and record the details"
		owner = { 
			add_country_modifier = { modifier = wotd_moa_science_modifier years = 3 }
		}
		scope:explorer = {
			random = {
				chance = 30 
				add_trait = trait:scientist_on_sea
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.23.b
		# "Attempt to drive the eagle away and save the Moa"
		scope:explorer = {
			add_trait = trait:brave_explorer
		}
		random_list = {
			60 = {
				custom_tooltip = wotd_moa_hunt_success_desc
				owner = {
					add_country_modifier = { modifier = wotd_exotic_menagerie_modifier years = 3 mode = add_and_extend }
				}
			}
			
			30 = {
				custom_tooltip = wotd_moa_hunt_fail_desc
				increase_peril_effect = {
					CHANGE = wotd_peril_large_value
				}
				show_as_tooltip = {
					scope:explorer = { add_character_modifier = { modifier = injured months = 3 mode = add_and_extend } }
				}
				hidden_effect = {
					random_list = {
						10 = {
							scope:explorer = { add_character_modifier = { modifier = injured months = 5 mode = add_and_extend } }
						}
						8 = {
							scope:explorer = { add_character_modifier = { modifier = severely_injured months = 9 mode = add_and_extend } }
						}
						5 = {
							scope:explorer = { add_character_modifier = { modifier = gravely_injured months = 13 mode = add_and_extend } }
						}
					}
				}
			}
		}
	} 

	after = { 
		owner = { set_variable = wotd_discovered_moa }
	}
}

# Event 24: The Pygmy Elephants of the Borneo
wotd_flora_and_fauna.24 = {
	type = exploration_event
	title = wotd_flora_and_fauna.24.title
	desc = wotd_flora_and_fauna.24.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/borneo_pygmy_elephant.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_borneo_pygmy_elephant } }
		location = {
			OR = {
				area = area:north_borneo_area
				area = area:south_borneo_area
			}
		}

		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = discovery_country }
	}

	option = {
		name = wotd_flora_and_fauna.24.a
		# Cash in on East-Asian sentiments
		trigger = {
			location = {
				any_neighbor_location = {
					has_owner = yes 
				}
			}
		}

		location = {
			random_neighbor_location = {
				limit = {
					has_owner = yes
				}
				save_scope_as = target_country
				owner = {
					add_opinion = {
						target = scope:discovery_country
						modifier = wotd_gifted_borneo_pygmy_elephant
					}
				}
			}
		}
		custom_tooltip = wotd_gifted_borneo_pygmy_elephant_desc

		decrease_peril_effect = {
			CHANGE = wotd_peril_medium_value
		}
	}

	option = {
		name = wotd_flora_and_fauna.24.b
		# Our friends in Europe might appreciate these gifts
		
		scope:discovery_country = { 
			random_neighbor_country = {
				limit = {
					capital ?= { continent = continent:europe }
				}
				save_scope_as = target_country
				add_opinion = {
					target = scope:discovery_country
					modifier = wotd_gifted_borneo_pygmy_elephant
				}
			}
		}
		custom_tooltip = wotd_gifted_borneo_pygmy_elephant_desc
	}

	after = { 
		owner = { set_variable = wotd_discovered_borneo_pygmy_elephant }
	}
}

# Event 25: The Familiar Stranger
wotd_flora_and_fauna.25 = {
	type = exploration_event
	title = wotd_flora_and_fauna.25.title
	desc = wotd_flora_and_fauna.25.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/beaver.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { 
			NOT = { has_variable = wotd_discovered_beaver }
			capital ?= { 
				region = region:scandinavian_region
				region = region:north_atlantic_islands_region
				region = region:north_german_region
				region = region:great_britain_region
				region = region:ireland_region
				region = region:iberia_region	
			}
		}
		location = {
			OR = {
				region = region:canada_region
				region = region:alaska_region
				region = region:great_plains_region
				region = region:east_coast_region
				region = region:west_coast_region
			}
		}
		area = { is_area_sea = no }
		NOT = { has_variable = wotd_discovered_new_world_beaver }
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = discovery_country }
	}

	option = {
		name = wotd_flora_and_fauna.25.a
		trigger_event_silently = {
			id = wotd_flora_and_fauna.26
			#years = { 1 5}
			days = 1
		}
		custom_tooltip = wotd_beaver_comforting.tt
		decrease_peril_effect = {
			CHANGE = wotd_peril_large_value
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_new_world_beaver }
	}
}

# Event 26: Beaver Bollocks
wotd_flora_and_fauna.26 = {
	type = exploration_event
	title = wotd_flora_and_fauna.26.title
	desc = wotd_flora_and_fauna.26.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/beaver.dds"
	#historical_info = earthquake_events.1001.historical_info
	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { 
			NOT = { has_variable = wotd_discovered_beaver }
			capital ?= { 
				region = region:scandinavian_region
				region = region:north_atlantic_islands_region
				region = region:north_german_region
				region = region:great_britain_region
				region = region:ireland_region
				region = region:iberia_region	
			}
			any_owned_location = {
				has_institution = institution:renaissance
			}
		}
		location = {
			OR = {
				region = region:canada_region
				region = region:alaska_region
				region = region:great_plains_region
				region = region:east_coast_region
				region = region:west_coast_region
			}
		}
		area = { is_area_sea = no }
	}

	on_trigger_fail = {
		trigger_event_silently = {
			id = wotd_flora_and_fauna.26
			years = { 5 20 }
		}
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = discovery_country }
	}

	option = {
		name = wotd_flora_and_fauna.26.a
		# "Reintroduce beavers to our waterways."
		owner = {
			add_country_modifier = {
				modifier = wotd_beaver_reintroduction_modifier
				years = 10
			}
		}
	}

	option = {
		name = wotd_flora_and_fauna.26.b
		high_reward_option = yes     
		# Pliny the Elder you say?
		owner = {
			add_country_modifier = { 
				modifier = wotd_focusing_on_the_classics_modifier 
				years = 3 
			}
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_beaver }
	}
}

# Event 27: Huohu - Red Panda's Good Luck Charm
wotd_flora_and_fauna.27 = {
	type = exploration_event
	title = wotd_flora_and_fauna.27.title
	desc = wotd_flora_and_fauna.27.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/red_panda.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { 
			NOT = { has_variable = wotd_discovered_red_panda }
		}
		location = {
			OR = {
				area = area:u_area
				area = area:assam_area
				area = area:kham_area
				area = area:nepal_area
			}
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = discovery_country }
	}

	option = {
		name = wotd_flora_and_fauna.27.a
		# Red. How proper.
		decrease_peril_effect = {
			CHANGE = wotd_peril_small_value
		}
		scope:explorer = {
			add_character_modifier = { modifier = wotd_red_panda_companion_modifier years = 15 }
		}
	}

	option = {
		name = wotd_flora_and_fauna.27.b
		# Spectate the Wedding
		location.region = {
			random_location_in_region = {
				limit = {
					has_owner = yes
					owner != scope:discovery_country
				}
				owner = {
					add_opinion = {
						target = scope:discovery_country
						modifier = wotd_attended_red_panda_wedding
					}
				}
			}
		}

		owner = { add_gold = -50}

		decrease_peril_effect = {
			CHANGE = wotd_peril_large_value
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_red_panda }
	}
}
 
# Event 28: Rampant Mandrill Horde
wotd_flora_and_fauna.28 = {
	type = exploration_event
	title = wotd_flora_and_fauna.28.title
	desc = wotd_flora_and_fauna.28.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/mandrill_monkey.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_mandrill } }
		location = {
			OR = {
				area = area:gulf_of_guinea_area
				area = area:north_gabun_area
			}
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.28.a
		# Protect the food stores at all costs!
	}

	option = {
		name = wotd_flora_and_fauna.28.b
		# A Horde you say?
	}

	after = { 
		owner = { set_variable = wotd_discovered_mandrill }
	}
}

# Event 29: Here be Dragons
wotd_flora_and_fauna.29 = {
	type = exploration_event
	title = wotd_flora_and_fauna.29.title
	desc = wotd_flora_and_fauna.29.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/komodo_dragon.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_komodo_dragon } }
		location = {
			area = area:lesser_sunda_islands_area
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
		owner = { save_scope_as = discovery_country }
	}

	option = {
		name = wotd_flora_and_fauna.29.a

		if = {
			limit = {
				OR = {
					this = c:CHI_Ming
					this = c:WLS
					this = c:CTW
					this = c:CHE
					this = c:WUU
					this = c:CFN
					this = c:CMO
					this = c:CXI
					this = c:CGU
					this = c:CSO
				}
			}
			add_prestige = 10
			add_colonial_claim = {
				province_definition = province_definition:flores_province
				reason = wotd_flora_and_fauna.29.a.claim.tt
				category = same_religion
			}
		}

		else = {
			add_prestige = 5
			change_exploration_progress = {
				value = exploration_time
				multiply = 0.05
			}
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_komodo_dragon }
	}
}

# Event 30: Central Bearded Dragon
wotd_flora_and_fauna.30 = {
	type = exploration_event
	title = wotd_flora_and_fauna.30.title
	desc = wotd_flora_and_fauna.30.desc
	hide_portraits = yes
	image = "gfx/interface/illustrations/event/backgrounds/wotd/bearded_dragon.dds"

	trigger = {
		exploration_progress > 0.05
		leader ?= {
			is_alive = yes
		}
		owner = { NOT = { has_variable = wotd_discovered_central_bearded_dragon } }
		location = {
			region = region:australia_region
		}
		area = { is_area_sea = no }
	}

	immediate = {
		leader = { save_scope_as = explorer }
	}

	option = {
		name = wotd_flora_and_fauna.30.a
		# "Capture one as a curiosity for the royal court"
		# owner = {
		# 	add_country_modifier = { modifier = wotd_exotic_menagerie_modifier years = 3 }
		# }
		decrease_peril_effect = {
			CHANGE = wotd_peril_small_value
		}
	}

	option = {
		name = wotd_flora_and_fauna.30.b
		# "Study their territorial displays"
		# scope:explorer = {
		# 	add_trait = trait:scientist_on_sea
		# 	add_character_modifier = { modifier = wotd_dragon_observer_modifier years = 3 }
		# }
		change_exploration_progress = {
			value = exploration_time
			multiply = 0.03
		}
	}

	after = { 
		owner = { set_variable = wotd_discovered_central_bearded_dragon }
	}
}